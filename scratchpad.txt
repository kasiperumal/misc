sequenceDiagram
    participant Banker
    participant CreateAppAgent
    participant LLMs
    participant Backend
    participant ValidateAppAgent
    participant QRCodeGenAgent

    Banker->>CreateAppAgent: Start conversation in natural language for account opening
    CreateAppAgent->>LLMs: Understand natural language and derive intent
    LLMs-->>CreateAppAgent: Extracted intent and relevant information

    CreateAppAgent->>Banker: Collects information (ProductSelection, CDD, Primary & Secondary ID)
    CreateAppAgent->>Backend: Fetch Home Address (based on ECN)
    Backend-->>CreateAppAgent: Prefill the Home Address

    CreateAppAgent->>LLMs: Parse and validate incomplete/ambiguous address data
    LLMs-->>CreateAppAgent: Resolved and validated information

    CreateAppAgent->>ValidateAppAgent: Extract Primary & Secondary ID (OCR)
    ValidateAppAgent->>LLMs: Analyze extracted data (e.g., detect inconsistencies, fraud)
    LLMs-->>ValidateAppAgent: Validated extracted ID data
    ValidateAppAgent->>Backend: Validate Primary & Secondary ID
    Backend-->>ValidateAppAgent: Validation Result
    ValidateAppAgent-->>CreateAppAgent: Extracted & Validated ID Data

    CreateAppAgent->>Banker: Provide application summary for review
    Banker->>CreateAppAgent: Confirm application summary

    CreateAppAgent->>QRCodeGenAgent: Generate QR Code for both applicants (Primary & Secondary)

    par Generate QR Code for Primary Applicant
        QRCodeGenAgent->>Backend: Fetch QR Code data for Primary Applicant
        Backend-->>QRCodeGenAgent: QR Code data for Primary Applicant
        QRCodeGenAgent-->>CreateAppAgent: QR Code for Primary Applicant
    end

    par Generate QR Code for Secondary Applicant
        QRCodeGenAgent->>Backend: Fetch QR Code data for Secondary Applicant
        Backend-->>QRCodeGenAgent: QR Code data for Secondary Applicant
        QRCodeGenAgent-->>CreateAppAgent: QR Code for Secondary Applicant
    end

    CreateAppAgent->>Banker: Render QR Codes for both applicants (one after another)
