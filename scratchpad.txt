spring:
  datasource:
    url: jdbc:h2:file:./data/testdb
    driver-class-name: org.h2.Driver
    username: 
    password:
    initialization-mode: always
  h2:
    console:
      enabled: true
  batch:
    jdbc:
      initialize-schema: always

import org.springframework.batch.core.repository.JobRepository;

    @Bean
    public Step step1(ItemReader<InputType> reader, ItemProcessor<InputType, OutputType> processor, 
                      ItemWriter<OutputType> writer) {
        return stepBuilderFactory.get("step1")
                .<InputType, OutputType>chunk(100)
                .reader(reader)
                .processor(processor)
                .writer(writer)
                .faultTolerant()
                .skip(Exception.class)
                .skipLimit(10)
                .retry(Exception.class)
                .retryLimit(3)
                .taskExecutor(taskExecutor())
                .build();
    }

    @Bean
    public Job job(JobRepository jobRepository, Step step1) {
        return jobBuilderFactory.get("job")
                .repository(jobRepository)
                .incrementer(new RunIdIncrementer())
                .start(step1)
                .build();
    }
}
