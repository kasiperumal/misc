sequenceDiagram
    participant Banker
    participant CreateAppAgent
    participant LLMs
    participant Backend
    participant ValidateAppAgent
    participant QRCodeGenAgent

    Banker->>CreateAppAgent: Start conversation<br>for account opening
    CreateAppAgent->>LLMs: Understand natural<br>language and derive intent
    LLMs-->>CreateAppAgent: Extracted intent<br>and relevant info

    CreateAppAgent->>Banker: Collect info<br>(ProductSelection, CDD,<br>Primary & Secondary ID)
    CreateAppAgent->>Backend: Fetch Home Address<br>(based on ECN)
    Backend-->>CreateAppAgent: Prefill<br>Home Address

    CreateAppAgent->>LLMs: Parse & validate<br>ambiguous address data
    LLMs-->>CreateAppAgent: Resolved<br>validated info

    CreateAppAgent->>ValidateAppAgent: Extract Primary<br>& Secondary ID (OCR)
    ValidateAppAgent->>LLMs: Analyze extracted<br>data (e.g., detect fraud)
    LLMs-->>ValidateAppAgent: Validated<br>ID data
    ValidateAppAgent->>Backend: Validate<br>Primary & Secondary ID
    Backend-->>ValidateAppAgent: Validation<br>Result
    ValidateAppAgent-->>CreateAppAgent: Validated<br>ID Data

    CreateAppAgent->>Banker: Provide application<br>summary for review
    Banker->>CreateAppAgent: Confirm<br>application summary

    CreateAppAgent->>QRCodeGenAgent: Generate QR Codes<br>for applicants

    par Generate Primary Applicant QR
        QRCodeGenAgent->>Backend: Fetch QR Code<br>data (Primary Applicant)
        Backend-->>QRCodeGenAgent: QR Code<br>data (Primary Applicant)
        QRCodeGenAgent-->>CreateAppAgent: QR Code<br>Primary Applicant
    end

    par Generate Secondary Applicant QR
        QRCodeGenAgent->>Backend: Fetch QR Code<br>data (Secondary Applicant)
        Backend-->>QRCodeGenAgent: QR Code<br>data (Secondary Applicant)
        QRCodeGenAgent-->>CreateAppAgent: QR Code<br>Secondary Applicant
    end

    CreateAppAgent->>Banker: Render QR Codes<br>for applicants<br>(one after another)
